---
title: Install
#pagination_next: kubernetes/installation/update
---

import TabItem from "@theme/TabItem";
import Tabs from "@theme/Tabs";

# Install the ngrok Kubernetes Operator

## Prerequisites

- A K8s cluster with kubectl access - We recommend using a recent version of K8s and will specify and test past versions as a part of [this GitHub issue](https://github.com/ngrok/ngrok-operator/issues/154)
- [helm](https://helm.sh/docs/intro/install/) - 3.0.0 or later.

TODO: Alice, write content
TODO: Kind/k3d/Minikube
TODO: beta releases

## Installation

### 1. Add the ngrok Helm chart

```bash
helm repo add ngrok https://charts.ngrok.com
helm repo update
```

:::note
Whenever you want to update the operator or install a new version, you must run `helm repo update` to fetch the latest charts.
:::

### 2. Get your ngrok API Key and Auth Token

In order to use the ngrok Kubernetes Operator, you will need an ngrok account.
Once you have an account, you will need to log into the [ngrok dashboard](https://dashboard.ngrok.com) to gather the necessary credentials.

You will need two things from the dashboard:

- Your auth token, which can be found [here](https://dashboard.ngrok.com/get-started/your-authtoken)
- An API key, which can be generaterd [here](https://dashboard.ngrok.com/api)

These credentials will be created as a Kubernetes secret, which the controller will have access to.
The auth token is used to create tunnels, and the API key is used to manage resources via the ngrok API.

```bash
export NGROK_AUTHTOKEN=your coppied auth token goes here
export NGROK_API_KEY=your coppied api key goes here
```

### 3. Select your Namespace

Set the following variable to whatever you would like the installation namespace to be.
We recommend using the default `ngrok-operator` namespace unless you need to change that.

```bash
export NAMESPACE=ngrok-operator
```

### 4. Install the Operator

While you can pass the credential values directly via helm values like the below simple example shows, we do not recommend this for production scenarios.
Instead, we recommend creating a Kubernetes secret and passing the secret name to the helm chart.
This allows for easier infrastructure as code and prevents users with access to the cluster from viewing the API key and auth token using commands like `helm get values`.
Select one of the below options based on which method you are comfortable with.

<Tabs groupId="k8s" queryString="k8s-install">
	<TabItem value="simple" label="Simple Credentials" default>
		```bash
		helm install ngrok-operator ngrok/ngrok-operator \
    --namespace $NAMESPACE \
    --create-namespace \
    --set credentials.apiKey=$NGROK_API_KEY \
    --set credentials.authtoken=$NGROK_AUTHTOKEN
		```
	</TabItem>
	<TabItem value="secure" label="Secure Credentials">
		First, prepare the Secret for your credentials

    	```bash
    export ENCODED_NGROK_AUTHTOKEN=$(echo -n "$NGROK_AUTHTOKEN" | base64)
    export ENCODED_NGROK_API_KEY=$(echo -n "$NGROK_API_KEY" | base64)
    kubectl apply -f -<<EOF
    apiVersion: v1
    kind: Secret
    metadata:
      name: ngrok-operator-credentials
      namespace: $NAMESPACE
    data:
      API_KEY: "$ENCODED_NGROK_API_KEY"
      AUTHTOKEN: "$ENCODED_NGROK_AUTHTOKEN"
    EOF
    	```

    	Next, install the operator

    	```bash
    	helm install ngrok-operator ngrok/ngrok-operator \
    --namespace $NAMESPACE \
    --create-namespace \
    --set credentials.secret.name=ngrok-operator-credentials \
    	```

    </TabItem>

</Tabs>

### Creating the Secret

To create the secret, follow these steps:

- Make sure the secret is in the same namespace as the ngrok Kubernetes Operator
- Use a well-formed name that can be passed to the helm chart
- Add two keys to the secret: `API_KEY` and `AUTHTOKEN`

Here is an example secret manifest:

```yaml
apiVersion: v1
kind: Secret
metadata:
  name: ngrok-ingress-controller-credentials
  namespace: ngrok-ingress-controller
data:
  API_KEY: "YOUR-API-KEY-BASE64"
  AUTHTOKEN: "YOUR-AUTHTOKEN-BASE64"
```

```bash
export NGROK_AUTHTOKEN=your coppied auth token goes here
export NGROK_API_KEY=your coppied api key goes here
```

```bash
export NAMESPACE=[YOUR_K8S_NAMESPACE]
export NGROK_AUTHTOKEN=[AUTHTOKEN]
export NGROK_API_KEY=[API_KEY]

helm install ngrok-ingress-controller ngrok/kubernetes-ingress-controller \
  --namespace $NAMESPACE \
  --create-namespace \
  --set credentials.apiKey=$NGROK_API_KEY \
  --set credentials.authtoken=$NGROK_AUTHTOKEN \
  --set useExperimentalGatewayApi=true
```
